{% extends 'base.html' %}
{% load static %}
{% load humanize %}

{% block specific_css %}
    {# head block#}
    <link rel="stylesheet" type="text/css" href="{% static 'table.css' %}">
{% endblock %}


{% block content %}


    <div class="container my-5">
        <div class="d-flex">
            <h3 class="me-auto mt-auto">주류 가격 정보 공유</h3>
            <button
                    class="btn btn-secondary fs-5"
                    data-bs-toggle="collapse"
                    data-bs-target="#collapse_price_info"
                    aria-expanded="false"
                    aria-controls="collapse_price_info">정보 등록하기
            </button>
        </div>
        {# Input collapse table form start form here #}
        <div class="collapse my-4" id="collapse_price_info">
            <form action="" method="post">
                {% csrf_token %}
                <table class="table_css table table-sm table-striped">
                    <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">대분류</th>
                        <th scope="col">소분류</th>
                        <th scope="col" class="col-2">이름</th>
                        <th scope="col">라인업</th>
                        <th scope="col" class="col-1">숙성년도</th>
                        <th scope="col" class="col-1">가격(₩)</th>
                        <th scope="col">용량(ml)</th>
                        <th scope="col">구매처</th>
                        <th scope="col" class="col-1">확인날짜</th>
                        <th scope="col">비고</th>
                    </tr>
                    </thead>
                    <tbody class="border-bottom border-dark">


                    <tr>
                        <th scope="row">예)</th>
                        <td>위스키</td>
                        <td>블랜디드</td>
                        <td>폴라워커</td>
                        <td>브라운라벨</td>
                        <td>8</td>
                        <td>60000</td>
                        <td>700</td>
                        <td>폴라마트</td>
                        <td>2022/04/26</td>
                        <td>2022한정판</td>
                    </tr>
                    <tr>
                        <th scope="row"></th>
                        <td>
                            <label><input name="input_category_1" id="input_category_1" type="text" style="width:5rem;"
                                          class="table_input_text_css"></label></td>
                        <td>
                            <label><input name="input_category_2" id="input_category_2" type="text" style="width:5rem;"
                                          class="table_input_text_css"></label>
                        </td>
                        <td>
                            <label><input name="input_liqueur_name" id="input_liqueur_name" type="text"
                                          style="width:8rem;" class="table_input_text_css_required" placeholder="필수"></label></td>
                        <td>
                            <label><input name="input_lineup" id="input_lineup" type="text" style="width:6rem;"
                                          class="table_input_text_css"></label>
                        </td>
                        <td>
                            <label><input name="input_aged" id="input_aged" type="text" style="width:6rem;"
                                          class="table_input_text_css"></label>
                        </td>
                        <td>
                            <label><input name="input_price" id="input_price" type="text" style="width:6rem;"
                                           class="table_input_text_css_required" placeholder="필수"></label>
                        </td>
                        <td>
                            <label><input name="input_size" id="input_size" type="text" style="width:6rem;"
                                          class="table_input_text_css_required" placeholder="필수"></label>
                        </td>
                        <td>
                            <label><input name="input_purchasing_route" id="input_purchasing_route" type="text"
                                          style="width:6rem;" class="table_input_text_css_required" placeholder="필수"></label>
                        </td>
                        <td>
                            <label><input name="input_confirmation_date" id="input_confirmation_date" type="date"
                                          style="width:8rem;" class="table_input_text_css mt-1"></label>
                        </td>
                        <td>
                            <label><input name="input_note" id="input_note" type="text" style="width:6rem;"
                                          class="table_input_text_css"></label>
                        </td>
                    </tr>

                    </tbody>
                </table>
                <div>
                    <input type="submit" value="제출" class="btn btn-secondary fs-5 float-end mb-5" style="width: 8rem">
                </div>
            </form>
        </div>
        {# Collapse table code ended at this poiint #}

        {# START PRICE TABLE FROM HERE #}
        {% if price_list %}
            {#  If there is no price data, It does not create table #}
            <div class="mt-4 table-responsive-sm">
                {# "table_css" includes: background-color #}
                <table class="table_css table table-sm table-striped">
                    <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">대분류</th>
                        <th scope="col">소분류</th>
                        <th scope="col" class="col-3">이름</th>
                        <th scope="col">라인업</th>
                        <th scope="col" class="col-1">숙성년도</th>
                        <th scope="col" class="col-1">가격</th>
                        <th scope="col">용량</th>
                        <th scope="col">구매처</th>
                        <th scope="col" class="col-1">확인날짜</th>
                        <th scope="col">비고</th>
                    </tr>
                    </thead>
                    <tbody class="border-bottom border-dark">

                    {% for price in price_list %}
                        <tr>
                            <th scope="row">{{ forloop.counter }}</th>
                            <td>{{ price.category_1 }}</td>
                            <td>{{ price.category_2 }}</td>
                            <td>{{ price.name }}</td>
                            <td>{{ price.lineup }}</td>

                            {# 숙성년도 값이 None 이라면 year 을 표시하지 않음 #}
                            {% if price.aged %}
                                <td>{{ price.aged }} year</td>
                            {% else %}
                                <td>{{ price.aged }}</td>
                            {% endif %}

                            <td>₩ {{ price.price | intcomma }}</td>
                            <td>{{ price.size }} ml</td>
                            <td>{{ price.purchasing_route }}</td>
                            <td>{{ price.confirmation_date|date:'Y/m/d' }}</td>
                            <td>{{ price.note }}</td>
                        </tr>
                    {% endfor %}



                    {# Dummy Data - blue color table #}
                    {% for price in price_list_dummy %}

                        {# class="table_css_dummy" includes: Dummyu data recorde color -> blue #}
                        <tr class="table_css_dummy">

                            {# Dummy price_list forloop counter follows index of real prices #}
                            <th scope="row">{{ forloop.counter|add:price_list.count }}</th>
                            <td>{{ price.category_1 }}</td>
                            <td>{{ price.category_2 }}</td>
                            <td>{{ price.name }} ** 더미데이터 입니다</td>
                            <td>{{ price.lineup }}</td>

                            {# 숙성년도 값이 None 이라면 year 을 표시하지 않음 #}
                            {% if price.aged %}
                                <td>{{ price.aged }} year</td>
                            {% else %}
                                <td>{{ price.aged }}</td>
                            {% endif %}

                            <td>₩ {{ price.price | intcomma }}</td>
                            <td>{{ price.size }} ml</td>
                            <td>{{ price.purchasing_route }}</td>
                            <td>{{ price.confirmation_date|date:'Y/m/d' }}</td>
                            <td>{{ price.note }}</td>
                        </tr>
                    {% endfor %}


                    </tbody>
                </table>
            </div>

        {% else %}
            {#  레코드가 1개도 없을 때 #}
            <div class="mt-4">
                <span>데이터가 없습니다.</span>
            </div>
        {% endif %}

    </div>

{% endblock %}